/Server/Microsoft/IISSites:
  description: "Microsoft IIS site monitoring. (PowerShell Get-Counter)"
  targetPythonClass: "ZenPacks.zenoss.Microsoft.Windows.WinIIS"

  datasources:
    iisBytesReceived:
      type: WinRS
      resource: \Web Service(${here/sitename})\Bytes Received/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisBytesReceived: GAUGE

    iisBytesSent:
      type: WinRS
      resource: \Web Service(${here/sitename})\Bytes Sent/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisBytesSent: GAUGE

    iisCGIRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\CGI Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisCGIRequests: GAUGE

    iisConnectionAttempts:
      type: WinRS
      resource: \Web Service(${here/sitename})\Connection Attempts/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisConnectionAttempts: GAUGE

    iisCopyRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Copy Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisCopyRequests: GAUGE

    iisCurrentConnections:
      type: WinRS
      resource: \Web Service(${here/sitename})\Connection Attempts/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisCurrentConnections: GAUGE

    iisDeleteRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Delete Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisDeleteRequests: GAUGE

    iisFilesReceived:
      type: WinRS
      resource: \Web Service(${here/sitename})\Files Received/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisFilesReceived: GAUGE

    iisFilesSent:
      type: WinRS
      resource: \Web Service(${here/sitename})\Files Sent/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisFilesSent: GAUGE

    iisGetRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Get Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisGetRequests: GAUGE

    iisHeadRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Head Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisHeadRequests: GAUGE

    iisISAPIExtensionRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\ISAPI Extension Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisISAPIExtensionRequests: GAUGE

    iisLockRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Lock Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisLockRequests: GAUGE

    iisMkcolRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Mkcol Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisMkcolRequests: GAUGE

    iisMoveRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Move Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisMoveRequests: GAUGE

    iisOptionsRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Options Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisOptionsRequests: GAUGE

    iisOtherRequestMethods:
      type: WinRS
      resource: \Web Service(${here/sitename})\Other Request Methods/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisOtherRequestMethods: GAUGE

    iisPostRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Post Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisPostRequests: GAUGE

    iisPropfindRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Propfind Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisPropfindRequests: GAUGE

    iisProppatchRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Proppatch Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisProppatchRequests: GAUGE

    iisPutRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Put Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisPutRequests: GAUGE

    iisSearchRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Search Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisSearchRequests: GAUGE

    iisTraceRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Trace Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisTraceRequests: GAUGE

    iisUnlockRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Unlock Requests/sec
      strategy: powershell Get-Counter
      component: "${here/id}"

      datapoints:
        iisUnlockRequests: GAUGE

    sitecheck:
      type: IISSite
      statusname: "${here/statusname}"
      component: "${here/id}"
      eventClass: /Status
      severity: Warning

  graphs:
    "IIS - Connections":
      units: connections
      miny: 0

      graphpoints:
        Current:
          dpName: iisCurrentConnections
          format: "%7.0lf"

    "IIS - Connection Rate":
      units: connections/sec
      miny: 0

      graphpoints:
        Attempts:
          dpName: iisConnectionAttempts
          format: "%7.2lf%s"

    "IIS - Request Rate":
      units: requests/sec
      miny: 0

      graphpoints:
        CGI:
          dpName: iisCGIRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        COPY:
          dpName: iisCopyRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        DELETE:
          dpName: iisDeleteRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        GET:
          dpName: iisGetRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        HEAD:
          dpName: iisHeadRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        ISAPI:
          dpName: iisISAPIExtensionRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        LOCK:
          dpName: iisLockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MKCOL:
          dpName: iisMkcolRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MOVE:
          dpName: iisMoveRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        OPTIONS:
          dpName: iisOptionsRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        Other:
          dpName: iisOtherRequestMethods
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        POST:
          dpName: iisPostRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPFIND:
          dpName: iisPropfindRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPPATCH:
          dpName: iisProppatchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PUT:
          dpName: iisPutRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        SEARCH:
          dpName: iisSearchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        TRACE:
          dpName: iisTraceRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        UNLOCK:
          dpName: iisUnlockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"

    "IIS - File Rate":
      units: files/sec
      miny: 0

      graphpoints:
        Received:
          dpName: iisFilesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisFilesSent
          format: "%7.2lf%s"

    "IIS - Throughput":
      units: bytes/sec
      base: true
      miny: 0

      graphpoints:
        Received:
          dpName: iisBytesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisBytesSent
          format: "%7.2lf%s"


##############################################################################

/Server/Microsoft/IISSites-TypePerf:
  description: "Microsoft IIS site monitoring. (typeperf)"
  targetPythonClass: "ZenPacks.zenoss.Microsoft.Windows.WinIIS"

  datasources:
    iisBytesReceived:
      type: WinRS
      resource: \Web Service(${here/sitename})\Bytes Received/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisBytesReceived: GAUGE

    iisBytesSent:
      type: WinRS
      resource: \Web Service(${here/sitename})\Bytes Sent/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisBytesSent: GAUGE

    iisCGIRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\CGI Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisCGIRequests: GAUGE

    iisConnectionAttempts:
      type: WinRS
      resource: \Web Service(${here/sitename})\Connection Attempts/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisConnectionAttempts: GAUGE

    iisCopyRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Copy Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisCopyRequests: GAUGE

    iisCurrentConnections:
      type: WinRS
      resource: \Web Service(${here/sitename})\Connection Attempts/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisCurrentConnections: GAUGE

    iisDeleteRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Delete Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisDeleteRequests: GAUGE

    iisFilesReceived:
      type: WinRS
      resource: \Web Service(${here/sitename})\Files Received/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisFilesReceived: GAUGE

    iisFilesSent:
      type: WinRS
      resource: \Web Service(${here/sitename})\Files Sent/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisFilesSent: GAUGE

    iisGetRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Get Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisGetRequests: GAUGE

    iisHeadRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Head Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisHeadRequests: GAUGE

    iisISAPIExtensionRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\ISAPI Extension Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisISAPIExtensionRequests: GAUGE

    iisLockRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Lock Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisLockRequests: GAUGE

    iisMkcolRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Mkcol Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisMkcolRequests: GAUGE

    iisMoveRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Move Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisMoveRequests: GAUGE

    iisOptionsRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Options Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisOptionsRequests: GAUGE

    iisOtherRequestMethods:
      type: WinRS
      resource: \Web Service(${here/sitename})\Other Request Methods/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisOtherRequestMethods: GAUGE

    iisPostRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Post Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisPostRequests: GAUGE

    iisPropfindRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Propfind Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisPropfindRequests: GAUGE

    iisProppatchRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Proppatch Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisProppatchRequests: GAUGE

    iisPutRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Put Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisPutRequests: GAUGE

    iisSearchRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Search Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisSearchRequests: GAUGE

    iisTraceRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Trace Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisTraceRequests: GAUGE

    iisUnlockRequests:
      type: WinRS
      resource: \Web Service(${here/sitename})\Unlock Requests/sec
      strategy: typeperf -sc1
      component: "${here/id}"

      datapoints:
        iisUnlockRequests: GAUGE

    sitecheck:
      type: IISSite
      statusname: "${here/statusname}"
      component: "${here/id}"
      eventClass: /Status
      severity: Warning

  graphs:
    "IIS - Connections":
      units: connections
      miny: 0

      graphpoints:
        Current:
          dpName: iisCurrentConnections
          format: "%7.0lf"

    "IIS - Connection Rate":
      units: connections/sec
      miny: 0

      graphpoints:
        Attempts:
          dpName: iisConnectionAttempts
          format: "%7.2lf%s"

    "IIS - Request Rate":
      units: requests/sec
      miny: 0

      graphpoints:
        CGI:
          dpName: iisCGIRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        COPY:
          dpName: iisCopyRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        DELETE:
          dpName: iisDeleteRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        GET:
          dpName: iisGetRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        HEAD:
          dpName: iisHeadRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        ISAPI:
          dpName: iisISAPIExtensionRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        LOCK:
          dpName: iisLockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MKCOL:
          dpName: iisMkcolRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MOVE:
          dpName: iisMoveRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        OPTIONS:
          dpName: iisOptionsRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        Other:
          dpName: iisOtherRequestMethods
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        POST:
          dpName: iisPostRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPFIND:
          dpName: iisPropfindRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPPATCH:
          dpName: iisProppatchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PUT:
          dpName: iisPutRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        SEARCH:
          dpName: iisSearchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        TRACE:
          dpName: iisTraceRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        UNLOCK:
          dpName: iisUnlockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"

    "IIS - File Rate":
      units: files/sec
      miny: 0

      graphpoints:
        Received:
          dpName: iisFilesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisFilesSent
          format: "%7.2lf%s"

    "IIS - Throughput":
      units: bytes/sec
      base: true
      miny: 0

      graphpoints:
        Received:
          dpName: iisBytesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisBytesSent
          format: "%7.2lf%s"
