/Server/Microsoft/IIS:
  description: "Microsoft Internet Information Services. (PowerShell Get-Counter)"
  targetPythonClass: "Products.ZenModel.Device"

  datasources:
    iisBytesReceived:
      type: WinRS
      resource: \Web Service(_Total)\Bytes Received/sec
      strategy: powershell Get-Counter

      datapoints:
        iisBytesReceived: GAUGE_MIN_0

    iisBytesSent:
      type: WinRS
      resource: \Web Service(_Total)\Bytes Sent/sec
      strategy: powershell Get-Counter

      datapoints:
        iisBytesSent: GAUGE_MIN_0

    iisCGIRequests:
      type: WinRS
      resource: \Web Service(_Total)\CGI Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisCGIRequests: GAUGE_MIN_0

    iisConnectionAttempts:
      type: WinRS
      resource: \Web Service(_Total)\Connection Attempts/sec
      strategy: powershell Get-Counter

      datapoints:
        iisConnectionAttempts: GAUGE_MIN_0

    iisCopyRequests:
      type: WinRS
      resource: \Web Service(_Total)\Copy Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisCopyRequests: GAUGE_MIN_0

    iisCurrentConnections:
      type: WinRS
      resource: \Web Service(_Total)\Current Connections
      strategy: powershell Get-Counter

      datapoints:
        iisCurrentConnections: GAUGE_MIN_0

    iisDeleteRequests:
      type: WinRS
      resource: \Web Service(_Total)\Delete Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisDeleteRequests: GAUGE_MIN_0

    iisFilesReceived:
      type: WinRS
      resource: \Web Service(_Total)\Files Received/sec
      strategy: powershell Get-Counter

      datapoints:
        iisFilesReceived: GAUGE_MIN_0

    iisFilesSent:
      type: WinRS
      resource: \Web Service(_Total)\Files Sent/sec
      strategy: powershell Get-Counter

      datapoints:
        iisFilesSent: GAUGE_MIN_0

    iisGetRequests:
      type: WinRS
      resource: \Web Service(_Total)\Get Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisGetRequests: GAUGE_MIN_0

    iisHeadRequests:
      type: WinRS
      resource: \Web Service(_Total)\Head Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisHeadRequests: GAUGE_MIN_0

    iisISAPIExtensionRequests:
      type: WinRS
      resource: \Web Service(_Total)\ISAPI Extension Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisISAPIExtensionRequests: GAUGE_MIN_0

    iisLockRequests:
      type: WinRS
      resource: \Web Service(_Total)\Lock Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisLockRequests: GAUGE_MIN_0

    iisMkcolRequests:
      type: WinRS
      resource: \Web Service(_Total)\Mkcol Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisMkcolRequests: GAUGE_MIN_0

    iisMoveRequests:
      type: WinRS
      resource: \Web Service(_Total)\Move Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisMoveRequests: GAUGE_MIN_0

    iisOptionsRequests:
      type: WinRS
      resource: \Web Service(_Total)\Options Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisOptionsRequests: GAUGE_MIN_0

    iisOtherRequestMethods:
      type: WinRS
      resource: \Web Service(_Total)\Other Request Methods/sec
      strategy: powershell Get-Counter

      datapoints:
        iisOtherRequestMethods: GAUGE_MIN_0

    iisPostRequests:
      type: WinRS
      resource: \Web Service(_Total)\Post Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisPostRequests: GAUGE_MIN_0

    iisPropfindRequests:
      type: WinRS
      resource: \Web Service(_Total)\Propfind Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisPropfindRequests: GAUGE_MIN_0

    iisProppatchRequests:
      type: WinRS
      resource: \Web Service(_Total)\Proppatch Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisProppatchRequests: GAUGE_MIN_0

    iisPutRequests:
      type: WinRS
      resource: \Web Service(_Total)\Put Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisPutRequests: GAUGE_MIN_0

    iisSearchRequests:
      type: WinRS
      resource: \Web Service(_Total)\Search Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisSearchRequests: GAUGE_MIN_0

    iisTraceRequests:
      type: WinRS
      resource: \Web Service(_Total)\Trace Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisTraceRequests: GAUGE_MIN_0

    iisUnlockRequests:
      type: WinRS
      resource: \Web Service(_Total)\Unlock Requests/sec
      strategy: powershell Get-Counter

      datapoints:
        iisUnlockRequests: GAUGE_MIN_0

  graphs:
    "IIS - Connections":
      units: connections
      miny: 0

      graphpoints:
        Current:
          dpName: iisCurrentConnections
          format: "%7.0lf"

    "IIS - Connection Rate":
      units: connections/sec
      miny: 0

      graphpoints:
        Attempts:
          dpName: iisConnectionAttempts
          format: "%7.2lf%s"

    "IIS - Request Rate":
      units: requests/sec
      miny: 0

      graphpoints:
        CGI:
          dpName: iisCGIRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        COPY:
          dpName: iisCopyRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        DELETE:
          dpName: iisDeleteRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        GET:
          dpName: iisGetRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        HEAD:
          dpName: iisHeadRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        ISAPI:
          dpName: iisISAPIExtensionRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        LOCK:
          dpName: iisLockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MKCOL:
          dpName: iisMkcolRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MOVE:
          dpName: iisMoveRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        OPTIONS:
          dpName: iisOptionsRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        Other:
          dpName: iisOtherRequestMethods
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        POST:
          dpName: iisPostRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPFIND:
          dpName: iisPropfindRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPPATCH:
          dpName: iisProppatchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PUT:
          dpName: iisPutRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        SEARCH:
          dpName: iisSearchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        TRACE:
          dpName: iisTraceRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        UNLOCK:
          dpName: iisUnlockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"

    "IIS - File Rate":
      units: files/sec
      miny: 0

      graphpoints:
        Received:
          dpName: iisFilesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisFilesSent
          format: "%7.2lf%s"

    "IIS - Throughput":
      units: bytes/sec
      base: true
      miny: 0

      graphpoints:
        Received:
          dpName: iisBytesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisBytesSent
          format: "%7.2lf%s"


##############################################################################

/Server/Microsoft/IIS-TypePerf:
  description: "Microsoft Internet Information Services. (typeperf)"
  targetPythonClass: "Products.ZenModel.Device"

  datasources:
    iisBytesReceived:
      type: WinRS
      resource: \Web Service(_Total)\Bytes Received/sec
      strategy: typeperf -sc1

      datapoints:
        iisBytesReceived: GAUGE_MIN_0

    iisBytesSent:
      type: WinRS
      resource: \Web Service(_Total)\Bytes Sent/sec
      strategy: typeperf -sc1

      datapoints:
        iisBytesSent: GAUGE_MIN_0

    iisCGIRequests:
      type: WinRS
      resource: \Web Service(_Total)\CGI Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisCGIRequests: GAUGE_MIN_0

    iisConnectionAttempts:
      type: WinRS
      resource: \Web Service(_Total)\Connection Attempts/sec
      strategy: typeperf -sc1

      datapoints:
        iisConnectionAttempts: GAUGE_MIN_0

    iisCopyRequests:
      type: WinRS
      resource: \Web Service(_Total)\Copy Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisCopyRequests: GAUGE_MIN_0

    iisCurrentConnections:
      type: WinRS
      resource: \Web Service(_Total)\Current Connections
      strategy: typeperf -sc1

      datapoints:
        iisCurrentConnections: GAUGE_MIN_0

    iisDeleteRequests:
      type: WinRS
      resource: \Web Service(_Total)\Delete Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisDeleteRequests: GAUGE_MIN_0

    iisFilesReceived:
      type: WinRS
      resource: \Web Service(_Total)\Files Received/sec
      strategy: typeperf -sc1

      datapoints:
        iisFilesReceived: GAUGE_MIN_0

    iisFilesSent:
      type: WinRS
      resource: \Web Service(_Total)\Files Sent/sec
      strategy: typeperf -sc1

      datapoints:
        iisFilesSent: GAUGE_MIN_0

    iisGetRequests:
      type: WinRS
      resource: \Web Service(_Total)\Get Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisGetRequests: GAUGE_MIN_0

    iisHeadRequests:
      type: WinRS
      resource: \Web Service(_Total)\Head Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisHeadRequests: GAUGE_MIN_0

    iisISAPIExtensionRequests:
      type: WinRS
      resource: \Web Service(_Total)\ISAPI Extension Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisISAPIExtensionRequests: GAUGE_MIN_0

    iisLockRequests:
      type: WinRS
      resource: \Web Service(_Total)\Lock Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisLockRequests: GAUGE_MIN_0

    iisMkcolRequests:
      type: WinRS
      resource: \Web Service(_Total)\Mkcol Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisMkcolRequests: GAUGE_MIN_0

    iisMoveRequests:
      type: WinRS
      resource: \Web Service(_Total)\Move Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisMoveRequests: GAUGE_MIN_0

    iisOptionsRequests:
      type: WinRS
      resource: \Web Service(_Total)\Options Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisOptionsRequests: GAUGE_MIN_0

    iisOtherRequestMethods:
      type: WinRS
      resource: \Web Service(_Total)\Other Request Methods/sec
      strategy: typeperf -sc1

      datapoints:
        iisOtherRequestMethods: GAUGE_MIN_0

    iisPostRequests:
      type: WinRS
      resource: \Web Service(_Total)\Post Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisPostRequests: GAUGE_MIN_0

    iisPropfindRequests:
      type: WinRS
      resource: \Web Service(_Total)\Propfind Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisPropfindRequests: GAUGE_MIN_0

    iisProppatchRequests:
      type: WinRS
      resource: \Web Service(_Total)\Proppatch Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisProppatchRequests: GAUGE_MIN_0

    iisPutRequests:
      type: WinRS
      resource: \Web Service(_Total)\Put Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisPutRequests: GAUGE_MIN_0

    iisSearchRequests:
      type: WinRS
      resource: \Web Service(_Total)\Search Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisSearchRequests: GAUGE_MIN_0

    iisTraceRequests:
      type: WinRS
      resource: \Web Service(_Total)\Trace Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisTraceRequests: GAUGE_MIN_0

    iisUnlockRequests:
      type: WinRS
      resource: \Web Service(_Total)\Unlock Requests/sec
      strategy: typeperf -sc1

      datapoints:
        iisUnlockRequests: GAUGE_MIN_0

  graphs:
    "IIS - Connections":
      units: connections
      miny: 0

      graphpoints:
        Current:
          dpName: iisCurrentConnections
          format: "%7.0lf"

    "IIS - Connection Rate":
      units: connections/sec
      miny: 0

      graphpoints:
        Attempts:
          dpName: iisConnectionAttempts
          format: "%7.2lf%s"

    "IIS - Request Rate":
      units: requests/sec
      miny: 0

      graphpoints:
        CGI:
          dpName: iisCGIRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        COPY:
          dpName: iisCopyRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        DELETE:
          dpName: iisDeleteRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        GET:
          dpName: iisGetRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        HEAD:
          dpName: iisHeadRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        ISAPI:
          dpName: iisISAPIExtensionRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        LOCK:
          dpName: iisLockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MKCOL:
          dpName: iisMkcolRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        MOVE:
          dpName: iisMoveRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        OPTIONS:
          dpName: iisOptionsRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        Other:
          dpName: iisOtherRequestMethods
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        POST:
          dpName: iisPostRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPFIND:
          dpName: iisPropfindRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PROPPATCH:
          dpName: iisProppatchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        PUT:
          dpName: iisPutRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        SEARCH:
          dpName: iisSearchRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        TRACE:
          dpName: iisTraceRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"
          
        UNLOCK:
          dpName: iisUnlockRequests
          lineType: AREA
          stacked: true
          format: "%7.2lf%s"

    "IIS - File Rate":
      units: files/sec
      miny: 0

      graphpoints:
        Received:
          dpName: iisFilesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisFilesSent
          format: "%7.2lf%s"

    "IIS - Throughput":
      units: bytes/sec
      base: true
      miny: 0

      graphpoints:
        Received:
          dpName: iisBytesReceived
          format: "%7.2lf%s"

        Sent:
          dpName: iisBytesSent
          format: "%7.2lf%s"
